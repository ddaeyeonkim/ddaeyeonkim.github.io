---
date: '2023-07-26'
title: '[이펙티브 코틀린] 아이템 11~13 정리'
categories: ['book', 'kotlin']
summary: '이펙티브 코틀린 아이템 11 부터 13까지 정리'
thumbnail: ''
slug: 'effective-kotlin-items-11-to-13'
---

## Item 11. 가독성을 목표로 설계하라

### 인지 부하 감소
숙련된 코틀린 개발자도 구현 B를 이해하는데 다소 시간이 걸린다.  
기본적으로 '인지 부하'를 줄이는 방향으로 코드를 작성하자.
```kotlin
// 구현 A
if (person != null && person.isAdult) {
    view.showPerson(person)
} else {
    view.showError()
}
// 구현 B
person?.takeIf { it.isAdult }
    ?.let(view::showPerson)
    ?: view.showError()
```

### let 사용 케이스
- null check
```kotlin
class Person(val name: String)
var person: Person? = null

fun printName() {
	person?.let {
    	print(it.name)
    }
}
```

- 연산을 아규먼트 처리 후로 이동시킬 때
```kotlin
// A
print(students.filter{}.joinToString{})
// B
students.filter{}.joinToString{}.let(::print)
```

- 데코레이터를 사용해서 객체를 랩할 떄
```kotlin
val obj = FileInputStream("/file.gz")
	.let(::BufferedInputStream)
    .let(::ZipInputStream)
    .readObject() as SomeObject
```

## Item 12. 연산자 오버로드를 할 때는 의미에 맞게 사용하라

관례에 어긋나는 사용은 지양하자.
```kotlin
fun Int.factroial(): Int = (1..this).product()
fun Iterable<Int>.product(): Int = fold(1) { acc, i -> acc * i }

// Good
print(10 * 6.factorial())
// Bad
operator fun Int.not() = factorial()
print(10 * !6)
```

### 분명하지 않은 경우
infix 확장 함수나 top-level 함수 사용
```kotlin
// operator function : Bad
operator fun Int.times(operation: () -> Unit) = repeat(this) { operation() }
3 * { println("Hello") } // HelloHelloHello

// infix function : Good
infix fun Int.timesRepeated(operation: () -> Unit) = repeat(this) { operation() }
3 timesRepeated { println("Hello") } // HelloHelloHello

// top-level function : Good
repeat(this) { print("Hello") }
```

### 규칙을 무시해도 되는 경우
도메인 특화 언어를 설계할 때(ex. HTML DSL)
```kotlin
body {
    div {
        +"some text"
    }
}
```

## Item 13. Unit?을 리턴하지 말라

사용하지 말자.